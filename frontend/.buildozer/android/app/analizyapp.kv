#:import CustomDropMenu __main__.CustomDropMenu


<Gerenciador>:
    Login:
        name: "login_name"

    Registro:
        name: "registro_name"

    Inicio:
        id: inicio_id
        name: "inicio_name"

    Menu:
        name: "menu_name"

    Noticia:
        name: "noticia_name"

    ListarNoticias:
        id: listanoticias_id
        name: "listar_noticia_name"

    Admin:
        name: "admin_name"

    
    



    


<Login>:
    BoxLayout:
        id: box_login
        orientation: "vertical"
        padding: root.width*0.15, root.height*0.20
        #spacing: '20dp'

        canvas:
            Color:
                rgba: (1, 1, 1, 1)

            Rectangle:
                size: self.size
                pos: 0,0
                source: "images/background-fut-app.png"

        Image:
            source: "images/ball-soccer-vector.png"
            size_hint_y: None
            height: 100
            #size_hint_y: 2
            #allow_stretch: True
        

        MDTextField:
            id: id_text_login
            hint_text: "Login"
            line_color_normal: 1, 0, 1, 1
            text_color_focus: 0, 0, 0, 1
            required: True
            validator: "email"


        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: id_text_password.height

            MDTextField:
                id: id_text_password
                color: 0, 0, 0, 1
                hint_text: "Senha"
                line_color_normal: 1, 0, 1, 1
                text_color_focus: 0, 0, 0, 1
                required: True
                password: True
                icon_left: "key-variant"

            MDIconButton:
                icon: "eye-off"
                pos_hint: {"center_y": .5}
                pos: id_text_password.width - self.width + dp(8), 0
                theme_text_color: "Hint"
                text_color: 1, 0, 1, 1

                on_release:
                    self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                    id_text_password.password = False if id_text_password.password is True else True

        BoxLayout:
            id: box_entrar_cadastrar
            orientation: "horizontal"
            padding: 0, 0
            spacing: "30dp"

            MDFlatButton:
                id: id_button_login
                text: "Entrar"
                theme_text_color: "Custom"
                md_bg_color: 0, 0.5, 0.2, 1
                text_color: 1, 1, 1, 1
                on_release: root.do_login()
                on_press: root.on_press_spinner()

            MDFlatButton:
                id: id_login_button
                text: "Cadastra-se"
                theme_text_color: "Custom"
                md_bg_color: 0.5, 0.5, 0, 1
                text_color: 1, 1, 1, 1
                on_release: root.pass_to_register() 


        BoxLayout:
            id: load_spinner_container
            orientation: "vertical"
            padding: 0, 0
            spacing: "30dp"

            MDSpinner:
                id: load_spinner
                size_hint: None, None
                size: dp(20), dp(20)
                pos_hint: {'center_x': .5, 'center_y': .5}
                #active: True if root.load_if == True else False
                active: False
                determinate_time: 0


<Registro>:
    BoxLayout:
        id: box_login
        orientation: "vertical"
        padding: root.width*0.15, root.height*0.20
        #spacing: '20dp'

        canvas:
            Color:
                rgba: (1, 1, 1, 1)

            Rectangle:
                size: self.size
                pos: 0,0
                source: "images/background-cadastro.png"


        ScrollView:
        
            BoxLayout:
                id: register_id
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height 


                MDTextField:
                    id: id_first_name
                    hint_text: "Primeiro Nome"
                    line_color_normal: 1, 0, 1, 1
                    text_color_focus: 1, 1, 1, 1
                    #required: True

                MDTextField:
                    id: id_last_name
                    hint_text: "Sobrenome"
                    line_color_normal: 1, 0, 1, 1
                    text_color_focus: 1, 1, 1, 1
                    #required: True

                MDTextField:
                    id: id_email
                    hint_text: "Email"
                    line_color_normal: 1, 0, 1, 1
                    text_color_focus: 1, 1, 1, 1
                    required: True
                    helper_text: "user@gmail.com"
                    validator: "email"


                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    height: id_password.height

                    MDTextField:
                        id: id_password
                        color: 0, 0, 0, 1
                        hint_text: "Senha"
                        line_color_normal: 1, 0, 1, 1
                        text_color_focus: 1, 1, 1, 1
                        #required: True
                        password: True
                        icon_left: "key-variant"

                    MDIconButton:
                        icon: "eye-off"
                        pos_hint: {"center_y": .5}
                        pos: id_password.width - self.width + dp(8), 0
                        theme_text_color: "Hint"
                        on_release:
                            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                            id_password.password = False if id_password.password is True else True

                MDFlatButton:
                    id: id_login_button
                    text: "Cadastrar"
                    theme_text_color: "Custom"
                    md_bg_color: 0, 0.2, 0.5, 1
                    text_color: 1, 1, 1, 1
                    on_release: root.do_register()




<Inicio>:

    MDBottomNavigation:
        id: bottominicio
        panel_color: "#27de4e"
        selected_color_background: "orange"
        text_color_active: "lightgrey"
        current: "screen 2"

        MDBottomNavigationItem:
            name: 'screen 1'
            text: 'Inicio'
            icon: 'home'
            #badge_icon: "numeric-10"

            MDBoxLayout:
                orientation: "vertical"
                
                MDTopAppBar:
                    id: toolbarInicial
                    title: "Tabela de Pontuação"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#feea24"


                ScrollView:

                    MDBoxLayout:
                        md_bg_color: app.theme_cls.primary_color
                        id: id_jogo_stats
                        orientation: "vertical"
                        size_hint_y: None
                        height: self.minimum_height
                        padding: "40dp"
                        spacing: "70dp"

                        canvas:
                            Color:
                                rgba: (1, 1, 1, 1)
                            Rectangle:
                                size: self.size
                                pos: 0, 0



        MDBottomNavigationItem:
            name: 'screen 2'
            text: 'Notícias'
            icon: 'newspaper'
            #badge_icon: "numeric-5"
            #on_tab_press: root.pass_to("placares_name")
            #on_tab_release: root.pass_to("inicio_name")
            #on_tab_release: self.manager.current= "register_name"
       


            MDTopAppBar:
                id: toolbar
                title: "Últimas Notícias do Fut"
                elevation: 4
                pos_hint: {"top": 1}
                md_bg_color: "#feea24"

            MDSwiper:
                id: id_noticias
                size_hint_y: None
                height: root.height - toolbar.height - dp(40)
                y: root.height - self.height - toolbar.height - dp(20)
                items_spacing: dp(10)

                


        MDBottomNavigationItem:
            name: 'screen 3'
            text: 'Menu'
            icon: 'menu'
            on_tab_release: root.pass_to("menu_name")

           

<Table>:
    sizi_hint_y: None
    height: "90sp"

    Label:
        id: label_table
        font_size: 20
        color: 0, 0, 0, 1

   

<MySwiper>:
    id: swiper_noticias
    
    

    FitImage:
        id: id_label_imagens
        source: "none.png"
        radius: [20,]
        size_hint_y: None
        height: root.height-400
        pos_hint: {'center_y': .5}

    
    ScrollView:
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: root.ids.id_label_imagens.height+200
            size_hint_x: None
            width: root.ids.id_label_imagens.width
            #spacing: "80dp"
            #post_hint: {'center_y': .5}    
            
            MDLabel:
                id: id_label_noticias
                color: 0, 0, 0, 1
                text: "Futebol"
                #font_size: "30sp"
                size: self.texture_size
                text_size: dp(2), dp(1)


            MDLabel:
                id: id_noticias_descricao
                color: 0, 0, 0, 1
                text: "Detalhes"
                #font_size: "30sp"
                size: self.texture_size
                text_size: dp(2), dp(1)

            MDFlatButton:
                id: id_mais
                text: "Ler Mais"
                theme_text_color: "Custom"
                md_bg_color: 0.1, 0.2, 0.5, 1
                text_color: 1, 1, 1, 1
                spacing: "30dp"
                on_release: #self.parent.parent.parent.parent.parent.parent.parent.parent.root.ir_noticia(self.id_da_noticia)
                on_release: app.root.ids.inicio_id.ir_noticia(root.id_da_noticia)


<Noticia>:

    MDBoxLayout:
        orientation: "vertical"

        MDTopAppBar:
            title: "LEIA"
            id: toolbarNoticia
            md_bg_color: "#feea24"
            use_overflow: True
            #overflow_cls: CustomDropMenu()

            right_action_items: 
                [
                ["dots-vertical", lambda x: root.DropApp(x), "Opções", "Opções"],
                ]


        ScrollView:

            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height+800
                spacing: "420dp"
                # padding: "20dp"

                MDLabel:
                    id: title_noticia
                    font_style: "H6"
                    bold: True
                    halign: "center"
                    size: self.texture_size
                    text_size: dp(20), dp(10)
                    spacing: "300dp"

                MDLabel:
                    id: details_noticia
                    size: self.texture_size
                    text_size: dp(20), dp(10)
                    halign: "center"
                    spacing: "300dp"

                MDLabel:
                    size: self.texture_size
                    text_size: dp(20), dp(10)
                    halign: "center"
                    spacing: "300dp"
                    padding: [0, 200]



<Menu>:
    

    MDSliverAppbar:
        background_color: "#2d4a50"

        MDSliverAppbarHeader:

            MDRelativeLayout:

                FitImage:
                    source: "images/background-cadastro(0).png"

        MDSliverAppbarContent:
            id: content
            orientation: "vertical"
            padding: "12dp"
            spacing: "15dp"
            adaptive_height: True   

            

            CardItem:
                name_icon: 'help'
                title_change: ''
                subtitle_change: 'Sobre'

            CardItem:
                name_icon: 'logout'
                title_change: ''
                subtitle_change: 'Logout'
                on_release: root.do_logout()

            CardItem:
                name_icon: 'arrow-left-bottom-bold'
                title_change: ''
                subtitle_change: 'Voltar'
                on_release: root.voltar_android()

# admin

<Admin>:

    MDBoxLayout:
        orientation: "vertical"


        MDTopAppBar:
            orientation: "horizontal"
            title: "DashMin"
            id: toolbarNoticia
            md_bg_color: "#feea24"
            use_overflow: True
            #overflow_cls: CustomDropMenu()
            

            right_action_items: 
                [
                ["magnify", lambda x: root.SearchApp(x)],
                ]


        MDBoxLayout:
            orientation: "horizontal"

            MDBoxLayout:
                md_bg_color: 1, 0, 1, 1             
                size_hint_x: None
                width: "100dp"

                MDLabel: 
                    text: "Controle do App"
                    color: 1, 1, 1, 1


            ScrollView:
                spacing: "20dp"                
                

                MDStackLayout:
                    padding: "10dp"
                    spacing: "20dp"
                    md_bg_color: 0.1, 0, 0.1, 1
                    orientation: 'lr-tb'
                    

                    MDCard:
                        padding: 4
                        size_hint: None, None
                        size: "160dp", "80dp"
                        md_bg_color: 1, 1, 0.2, 1
                        radius: 10                       
                        

                        MDRelativeLayout:
                            md_bg_color: 69/255,55/255,86/255,1
                            radius: 10

                            MDIconButton:
                                icon: "wall"
                                pos_hint: {"top": 1, "right": 1}

                            MDLabel:
                                id: label
                                adaptive_size: True
                                text: "Cadastrar Notícia"
                                color: 1, 1, 1, 1
                                pos: "12dp", "12dp"
                                bold: True

                    MDCard:
                        padding: 4
                        size_hint: None, None
                        size: "160dp", "80dp"
                        md_bg_color: 1, 1, 0.2, 1
                        radius: 10                       

                        MDRelativeLayout:
                            md_bg_color: 69/255,55/255,86/255,1
                            radius: 10

                            MDIconButton:
                                icon: "delete"
                                pos_hint: {"top": 1, "right": 1}

                            MDLabel:
                                id: label
                                adaptive_size: True
                                text: "Apagar Notícia"
                                color: 1, 1, 1, 1
                                pos: "12dp", "12dp"
                                bold: True

                       
                    MDCard:
                        padding: 4
                        size_hint: None, None
                        size: "160dp", "80dp"
                        md_bg_color: 1, 1, 0.2, 1
                        radius: 10                       

                        MDRelativeLayout:
                            md_bg_color: 69/255,55/255,86/255,1
                            radius: 10

                            MDIconButton:
                                icon: "information"
                                pos_hint: {"top": 1, "right": 1}

                            MDLabel:
                                id: label
                                adaptive_size: True
                                text: "Listar Notícias"
                                color: 1, 1, 1, 1
                                pos: "12dp", "12dp"
                                bold: True             



<ListarNoticias>:
    MDBoxLayout:
        orientation: "vertical"

        MDTopAppBar:
            elevation: 4
            title: "Notícias Cadastradas"
            md_bg_color: 0.1, 0, 0.1, 1

        MDScrollView:
            scroll_timeout : 100

            MDList:
                id: idlist
                padding: 0



<SwipeToDeleteItem>:
    size_hint_y: None
    height: content.height
    on_swipe_complete: app.root.ids.listanoticias_id.on_swipe_complete(root)

    MDCardSwipeLayerBox:
        padding: "8dp"

        MDIconButton:
            md_bg_color: 1, 1, 0, 1
            icon: "trash-can"
            pos_hint: {"center_y": .5}
            on_release: app.root.ids.listanoticias_id.remove_item_for_icon(root)

    MDCardSwipeFrontBox:

        # Content of card.
        OneLineListItem:
            id: content
            height: "200dp"
            _no_ripple_effect: True

            MDBoxLayout:
                orientation: "horizontal"

                MDLabel:
                    text: root.text

                FitImage:
                    size_hint_y: None
                    height: root.height-50
                    source: root.url_image

# admin fim




# classes auxiliares

<AlertErrorSnackbar>:

    MDIconButton:
        pos_hint: {'center_y': .5}
        icon: root.icon
        opposite_colors: True

    MDLabel:
        id: text_bar
        size_hint_y: None
        height: self.texture_size[1]
        text: root.text
        font_size: root.font_size
        theme_text_color: 'Custom'
        text_color: 'ffffff'
        shorten: True
        shorten_from: 'right'
        pos_hint: {'center_y': .5}


<CardItemMenuAdmin>:
    id: cardAdmin
    size_hint_y: None
    height: "86dp"
    padding: "4dp"
    on_release: app.root.current = "admin_name"

    MDIconButton
        id: id_icon
        icon: "office-building-cog"
        size_hint_x: None
        size_hint_y: None
        width: root.height
        pos_hint: {'center_x': .5, 'center_y': .5}

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: "6dp"
        padding: "12dp", 0, 0, 0
        pos_hint: {"center_y": .5}

        MDLabel:
            font_style: "H6"
            text: "Admin"
            theme_text_color: "Hint"
            adaptive_height: True
            bold: True




# custom class


<CardItem@MDCard>
    size_hint_y: None
    height: "86dp"
    padding: "4dp"
    #spacing: "10dp"
    #radius: "10dp" por algum motivo usar como root.radius não funciona e crash o app

    ## vars customs minhas
    name_icon: 'none' 
    title_change: 'none'
    subtitle_change: 'none'
    
    

    MDIconButton
        id: id_icon
        icon: root.name_icon
        #radius: "12dp"
        size_hint_x: None
        size_hint_y: None
        width: root.height
        pos_hint: {'center_x': .5, 'center_y': .5}

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: "6dp"
        padding: "12dp", 0, 0, 0
        pos_hint: {"center_y": .5}

        MDLabel:
            font_style: "H6"
            text: root.subtitle_change
            theme_text_color: "Hint"
            adaptive_height: True
            bold: True



<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True